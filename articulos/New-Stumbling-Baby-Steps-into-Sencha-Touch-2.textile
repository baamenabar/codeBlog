title: New Stumbling Baby Steps into Sencha Touch 2
subtitle: A record of problems, errors, solutions and links while beginning to work with Sencha Touch 2, for developing mobile apps.
startDate:2014-05-13T02:57:01+00:00
classes: language-markup
lang: en
draft: true
pubDate:2014-05-13T02:57:01+00:00

 <header><hgroup>

h1. Stumbling first steps in Sencha Touch 2

h2. ...again
</hgroup></header>

More than a year ago I learnt some Sencha Touch 2, having done a couple of apps, which worked, but I was not thrilled about them; so I stuck to what I knew, RWD and the occasional webapp. But now I have a new project for which I need to build a prototype app, hence here I'm relearning Sencha Touch 2, from scratch, but this time I have a better understanding of a lot of stuff.

This is still going to hurt.

h2(#ac1). __[fr]Mise en place__ (what we'll need)

Just like before there's no clear way to "Get started", there are many many guides, tutorials, videos and hello world apps, from which you can get started. Many of which have different approaches to actually get started. 

* Downloaded Sencha, now on version 2.3.1; it promises to be a much more mature development process. 
* Also download the former SDK, now called Sencha Cmd.
* First unzip Sencha Touch to your development folder, like @C:\htdocs\sencha@
* Then install Sencha Cmd, easy compared to the painful install of the old SDK.
* Open a @cmd@ window and type <kbd>sencha</kbd>, it should return something like <samp>Sencha Cmd v4.0.4.48</samp> and a lot more text. If this doesn't work, check that you have the Java RE and Java SDK if you plan on compiling an Android app.
* You might also need Ruby installed with SASS and COMPASS if you want to properly play with the CSS styles and themes.

I'll be working with 3 official “guides” to build my own app, no idea which one will teach me more, so I'll do them all, together.

* "Getting Started with Sencha Touch 2: Build a Weather Utility App (Part 1)":http://www.sencha.com/blog/getting-started-with-sencha-touch-2-build-a-weather-utility-app-part-1/
* "Creating Your First App (for 2.3.1)":http://docs.sencha.com/touch/2.3.1/#!/guide/first_app
* "Getting Started with Sencha Touch (for 2.3.2)":http://docs.sencha.com/touch/2.3.2/#!/guide/getting_started

h2(#ac2). Generating the app

*Note:* I have an Apache server running with wamp, but you don't need one, Sencha Cmd, now comes packed with a Jetty web server you can make run for your project. I'm sticking to my Apache.

With the command line open (I like git bash). Create the folder you are going to work with, in my case it's @c:/htdocs/vas@. Navigate to the sencha folder @c:/htdocs/sencha@ and type something like the following:

bc. 
sencha generate app -name guiaVAS -path ../vas

Which will generate a demo app, with lots useful of scafolding. One can do the same from the folder of the app with the following command:

bc. 
sencha -sdk ../sencha generate app guiaVAS .

Where <kbd>-sdk ../sencha</kbd> is the argument for the path to the sencha library, and <kbd>guiaVAS</kbd> is the name of the app and <kbd> .</kbd> (a period) is the path where to generate it.

In both cases lots of text goes by and we are ready. If we visit @http://localhost/vas@ we can see the staple 3 dots animating while the Sencha App loads, and then a welcome screen (it used to have an image with the logo).

 Cinco segundos y ya estaba abierta la línea de comando,  en el video navegan hasta la carpeta donde está instalado sencha y parten inicalizando una carpeta con el siguiente comando

 <blockquote>
 	<kbd>sencha generate app GS ../GS</kbd>
 </blockquote>
 hago lo mismo y

<blockquote>
 	<code>no se esperaba * SenchaSDKTools * en este momento </code>
 </blockquote>
 <aside>
 	Luego de una breve confusión descubro que, en esta etapa no necesito bajar el <q>Sencha SDK Tools 2.0 Beta for Developers</q>.

 </aside>
 Pero sigo con el problema, así que buscando doy con el siguiente artículo de Sasha dos Santos

 "$":http://sashageekette.wordpress.com/2012/03/24/getting-started-with-sencha-touch-2-0-on-windows-7-x64/

 Donde me aclara que debo navegar hasta la carpeta donde está sencha descomprimido y entrar en la carpeta <code>command</code> ahí lo intento nuevamente:

 <blockquote>
 	<code>"jsdb" no se reconoce como un comando interno o externo, programa o archivo por lotes ejecutables.</code>
 </blockquote>
 Lo que para mí es chino, sigo leyendo el artículo y creo hacer lo que dice, pero luego de media hora me doy cuenta que hay una línea que no estaba leyendo bien, así que las instrucciones, en español y para los perdidos (como yo) son las siguientes:

 <ol>
 	<li>En el CMD navegar hasta la carpeta donde sencha SDK está descomprimido <q><kbd>C:\htdocs\sencha</kbd></q> 
 	</li>
 	<li>
 		Escribir: <kbd>command\sencha</kbd> si aparecen una serie de líneas explicando el uso, está ok; si no asegurarse de que estar ejecutando los comandos desde la raíz de la instalación de sencha.

 	</li>
 	<li>
 		finalmente <kbd>command\sencha generate app GS ../GS</kbd> ojo con las barras, la primera es Windows, la segunda LINUX

 	</li>
 </ol>
 Carpeta generada! sigamos con el video.

 El video presenta a una velocidad impresionante cómo ir armando tu primer app.

 Todo bien hasta que me salgo del guión, en cierto momento cargan datos JSON desde un feed de feeburner. Y si sigo los pasos, ni un problema. Pero si genero mis propios

 En el fondo estoy convirtiendo un array con los datos cargados de la página.


 <q><samp>"Unexpected token :"</samp></q>
necesitaba JSON-P

h2. JSON-P

Ni idea qué es ni como hacer JSON-P en PHP, pero doy con este artículo de Torleif Berger "$":http://www.geekality.net/2010/06/27/php-how-to-easily-provide-json-and-jsonp/ donde explica cómo generar JSON-P con PHP.

Sólo que su método de validación es un poco muy estricto y me firltra la manera en que Sencha Touch 2 nombra los pedidos callback. Le hago un pequeño hack al código de Torlief y quedo funcionando OK.

<figure>
	<blockquote>
		<code>if(is_valid_callback(implode('',explode('.',$_GET['callback']))))</code>
	</blockquote>
</figure>
Lo que también es útil es agregar sencha al path, porque así, una vez trabajando en un app, desde el cmd uno puede generar controllers muy fácil:

<figure><blockquote><kbd>sencha generate controller NombreDeUnControlador</kbd></blockquote>
</figure>

Sigo con el tutorial, es fácil seguir instrucciones pero entender como para hacer lo que quiero está bien complicado, aún así llego hasta la parte donde se publica como web-app, con el siguiente comando:

<figure>
	<blocquote>
	<kbd>command\sencha app build production</kbd>
</blocquote>
<figcaption>Esto creará una carpeta una carpeta build/production/ dentro de la carpeta del proyecto. Dentro de esa carpeta estará el proyecto &ldquo;minificado&rdquo;</figcaption>
</figure>
Luego de un rato tenemos una ágil aplicación corriendo en la carpeta build.

Es esta misma compilación la que se debe usar para empaquetar el app para Android o iOS, en un principio yo empaquetaba el app completo, y claro, pesaba 40 megas pero desde la carpeta compilada es mucho más rápido también(me costó un par de semanas descubrir eso).

Hay que tener paciecia con sencha, a un par de días de trabajo, tutoriales y guías, sigo con gusto a poco, el manejo de datos que he logrado hacer ha sido casi hackenado el sistema, realmente no entiendo este <i>framework</i> pero ya he dado los primeros pasos.

Luego de una semana y unos 5 apps de demo, varios video-tutoriales y particularmente los videos de Rohit Ghatol: http://www.youtube.com/watch?v=5F7Gx0-W-M4 y http://www.youtube.com/watch?v=0pFOrasUlOU finalmente ya me siento más cómodo con el framework y puedo lograr cosas que no salen en los ejemplos.

h2. Links útiles:

* "$":http://docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html (iniciar con android y phonegap) al hacer una prueba de RUN genera automáticamente el .APK
* "$":http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/ (Este debiese haberlo leído pero no lo hice)
* "$":http://stackoverflow.com/questions/9124365/image-upload-to-server-from-sencha-touch (más links, sobre subir imágenes con phonegap, el tercero promete)
* "$":http://docs.sencha.com/touch/2-0/#!/guide/native_android (buena guía para empaquetar de android, debo replicarla aquí)
* "$":http://www.mobiledevelopersolutions.com/home/download (AppLaud plugin para Eclipse, habrá que probarla a futuro)
* "$":http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#FileTransfer (Viene con buen ejemplo de cómo cargar una foto)

h2. Compilar un app nativo

Desde la carpeta de un proyecto:

<figure>
	<blocquote><kbd>
		sencha package build build/production/packager.json
	</kbd></blocquote>
	<figcaption>Empaquetado de un app nativo ya minificado por sencha app build</figcaption>
	
</figure>

El Sencha Touch 2 SDK 2.0.0 tiene una serie de problemas, como que no es capaz de hacer un "app build" si hay local-storage con autoload.

Con el SDK 2.0.2 que bajé si resulta.

